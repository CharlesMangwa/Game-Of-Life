var gulp=require("gulp"),browserSync=require("browser-sync"),reload=browserSync.reload;gulp.task("browser_sync",function(){browserSync({server:{baseDir:"./src/"}})}),gulp.task("bs-reload",function(){browserSync.reload()});var sourcemaps=require("gulp-sourcemaps"),sass=require("gulp-sass");gulp.task("stylesheet_dev",function(){gulp.src(["src/sass/**"]).pipe(sourcemaps.init()).pipe(sass()).on("error",function(e){console.log(e.message)}).pipe(sourcemaps.write()).pipe(gulp.dest("./src/css")).pipe(reload({stream:!0}))});var pleeease=require("gulp-pleeease"),cssbeautify=require("gulp-cssbeautify"),rename=require("gulp-rename"),PleeeaseOptions={minifier:!0,mqpacker:!1};gulp.task("stylesheet_prod",function(){gulp.src(["src/css/*.css"]).pipe(cssbeautify()).pipe(gulp.dest("prod/css/"))});var imagemin=require("gulp-imagemin"),pngcrush=require("imagemin-pngcrush");gulp.task("img",function(){gulp.src(["src/img/**"]).pipe(gulp.dest("prod/img"))}),gulp.task("fonts",function(){gulp.src(["src/fonts/**"]).pipe(gulp.dest("prod/fonts"))});var rimraf=require("gulp-rimraf");gulp.task("clean",function(){gulp.src("./prod").pipe(rimraf())});var gulpif=require("gulp-if"),uglify=require("gulp-uglify"),useref=require("gulp-useref"),assets=useref.assets(),minifyCSS=require("gulp-minify-css"),PleeeaseOptions={minifier:!0,mqpacker:!1};gulp.task("useref",function(){gulp.src("src/*.html").pipe(assets).pipe(gulpif("*.css",minifyCSS({keepSpecialComments:0}))).pipe(gulpif("*.js",uglify())).pipe(assets.restore()).pipe(useref()).pipe(gulp.dest("prod/"))}),gulp.task("prod",["clean","useref","stylesheet_prod","img","fonts"],function(){});var zip=require("gulp-zip");gulp.task("zip",["prod"],function(){gulp.src("prod/**/*").pipe(zip("prod.zip")).pipe(gulp.dest("./"))});var reactify=require("reactify"),browserify=require("gulp-browserify"),include=require("gulp-include");gulp.task("react",function(){gulp.src(["src/js/app/src/**.js","src/js/app/src/**/*.js"],{read:!0}).pipe(include()).pipe(browserify({transform:[reactify]})).on("error",function(e){console.log(e.message)}).pipe(gulp.dest("./src/js/app/build/")).pipe(reload({stream:!0}))}),gulp.task("dev",["browser_sync","react","stylesheet_dev"],function(){gulp.watch(["src/sass/**"],["stylesheet_dev"]),gulp.watch(["src/js/app/src/**.js","src/js/app/src/**/*.js"],["react"]),gulp.watch("src/css/*.css",["bs-reload"]),gulp.watch("src/*.html",["bs-reload"])});